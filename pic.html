<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Happy Birthday</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@font-face {
			font-family: digit;
			src: url('digital-7_mono.ttf') format("truetype");
		}
        body {
    margin: 0;
    padding: 0;
    background: #ffe;
    font-size: 12px;
    overflow: auto
}

#mainDiv {
    width: 100%;
    height: 100%
}

#loveHeart {
    float: left;
    width: 670px;
    height: 625px
}

#garden {
    width: 100%;
    height: 100%
}

#elapseClock {
    text-align: left;
    font-size: 14px;
    margin-top: 10px;
    margin-bottom: 10px
}

#words {
    font-family: "sans-serif";
    width: 500px;
    font-size: 14px;
    color: #666
}

#messages {
	margin-left: 130px;
    display: none
}

#elapseClock .digit {
    font-family: "digit";
    font-size: 22px
}

#loveu {
    padding: 5px;
    font-size: 14px;
    margin-top: 120px;
    margin-right: 100px;
    text-align: right;
    display: none
}

#loveu .signature {
    margin-top: 10px;
    font-size: 14px;
    font-style: italic
}

#clickSound {
    display: none
}

#code {
    float: left;
    width: 440px;
    height: 400px;
    color: #333;
    font-family: "Consolas", "Monaco", "Bitstream Vera Sans Mono", "Courier New", "sans-serif";
    font-size: 22px
}

#code .string {
    color: #2a36ff
}

#code .keyword {
    color: #7f0055;
    font-weight: bold
}

#code .placeholder {
    margin-left: 15px
}

#code .space {
    margin-left: 7px
}

#code .comments {
    color: #3f7f5f
}

#copyright {
    margin-top: 10px;
    text-align: center;
    width: 100%;
    color: #666
}

#errorMsg {
    width: 100%;
    text-align: center;
    font-size: 14px;
    position: absolute;
    top: 100px;
    left: 0
}

#copyright a {
    color: #666
}
	</style>
	<link href="css/default.css" type="text/css" rel="stylesheet">
	<script type="text/javascript" src="js/garden.js"></script>
    <script type="text/javascript" src="js/birthday-app.js"></script>
    
        
</head>

<body>
	<div id="mainDiv">
		<div id="content">
			<div id="code">
			
				<span class="space"/><span class="comments">Happy Birthday to the most beautiful soul I‚Äôve ever known ‚Äî my love, my wife, my everything. Even though distance keeps us apart today, my heart is right there with you, holding you close in every beat. I wish I could be by your side to see your smile, hold your hand, and whisper these words in person‚Ä¶ but until that day, know that every sunrise I wake up loving you more, and every night I sleep dreaming of us together. You are my greatest blessing, my constant prayer, and my forever home, no matter how far apart we are. Today I celebrate you ‚Äî the love that makes my life worth living. Soon, my arms will hold you again, but until then, my love will travel every mile to reach you. Happy Birthday, my forever. ‚ù§‚ú®"</span><br />
		
			</div>
			<div id="loveHeart">
				<canvas id="garden"></canvas>
				<div id="words">
					<div id="messages">
					</br>
					</br>
					</br>
					</br>
					</br>
					</br>
						    <p>Happy Birthday andi srimathi garu‚ù§Ô∏è </p>
                            love you so muchüòò</br>
					</div>
					<div id="loveu">
					No matter how far you are, you live in
                     my heart <br/>every moment‚ù§Ô∏è
						
					</div>
				</div>
			</div>
		</div>
		
	</div>
	<script type="text/javascript">
		// Modern implementation using the new BirthdayApp class
		const together = new Date();
		together.setFullYear(1908, 4, 8);
		together.setHours(8);
		together.setMinutes(0);
		together.setSeconds(0);
		together.setMilliseconds(0);
		
		if (!document.createElement('canvas').getContext) {
			const msg = document.createElement("div");
			msg.id = "errorMsg";
			msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+"; 
			document.body.appendChild(msg);
			document.getElementById("code").style.display = "none";
			const copyright = document.getElementById("copyright");
			copyright.style.position = "absolute";
			copyright.style.bottom = "10px";
		    document.execCommand("stop");
		} else {
			// Wait for BirthdayApp to initialize
			document.addEventListener('DOMContentLoaded', function() {
				setTimeout(() => {
					if (window.birthdayApp) {
						window.birthdayApp.startHeartAnimation();
					}
				}, 5000);

				// Start time counter
				if (window.birthdayApp) {
					window.birthdayApp.timeElapse(together);
					setInterval(() => {
						window.birthdayApp.timeElapse(together);
					}, 500);

					window.birthdayApp.adjustCodePosition();
					window.birthdayApp.typewriter(document.getElementById("code"));
				}
			});
		}
        // Modern Birthday App - ES6+ Implementation
// Replaces jQuery-dependent functions with vanilla JavaScript

class BirthdayApp {
    constructor() {
        this.canvas = null;
        this.ctx = null;
        this.garden = null;
        this.offsetX = 0;
        this.offsetY = 0;
        this.heartPoints = [];
        this.heartAnimation = null;
        this.init();
    }

    init() {
        // Initialize canvas elements when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => this.setupCanvas());
        } else {
            this.setupCanvas();
        }
    }

    setupCanvas() {
        const loveHeart = document.getElementById("loveHeart");
        if (loveHeart) {
            this.offsetX = loveHeart.offsetWidth / 2;
            this.offsetY = loveHeart.offsetHeight / 2 - 55;
        }

        this.canvas = document.getElementById("garden");
        
        if (this.canvas) {
            // Set canvas dimensions
            this.canvas.width = loveHeart.offsetWidth;
            this.canvas.height = loveHeart.offsetHeight;
            
            this.ctx = this.canvas.getContext("2d");
            this.ctx.globalCompositeOperation = "lighter";
            this.garden = new Garden(this.ctx, this.canvas);
            
            // Setup content positioning
            this.setupContentPositioning();
            
            // Start the garden render loop
            this.startGardenRenderLoop();
        }
    }

    startGardenRenderLoop() {
        setInterval(() => {
            if (this.garden) {
                this.garden.render();
            }
        }, Garden.options.growSpeed);
    }

    setupContentPositioning() {
        const content = document.getElementById("content");
        const loveHeart = document.getElementById("loveHeart");
        const code = document.getElementById("code");
        
        if (content && loveHeart && code) {
            const contentWidth = loveHeart.offsetWidth + code.offsetWidth;
            const contentHeight = Math.max(loveHeart.offsetHeight, code.offsetHeight);
            
            content.style.width = contentWidth + "px";
            content.style.height = contentHeight + "px";
            content.style.marginTop = Math.max((window.innerHeight - contentHeight) / 2, 10) + "px";
            content.style.marginLeft = Math.max((window.innerWidth - contentWidth) / 2, 10) + "px";
        }
    }

    // Modern fadeIn replacement for jQuery fadeIn
    fadeIn(element, duration = 3000, callback = null) {
        if (!element) return;
        
        element.style.opacity = 0;
        element.style.display = 'block';
        
        const startTime = performance.now();
        
        const animate = (currentTime) => {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            element.style.opacity = progress;
            
            if (progress < 1) {
                requestAnimationFrame(animate);
            } else if (callback) {
                callback();
            }
        };
        
        requestAnimationFrame(animate);
    }

    // Heart animation functionality with predefined points
    startHeartAnimation() {
        const interval = 5;
        let angle = 0;
        const heart = [];
        
        this.heartAnimation = setInterval(() => {
            const bloom = this.getHeartPoint(angle);
            let draw = true;
            
            for (let i = 0; i < heart.length; i++) {
                const p = heart[i];
                const distance = Math.sqrt(Math.pow(p[0] - bloom[0], 2) + Math.pow(p[1] - bloom[1], 2));
                if (distance < Garden.options.bloomRadius.max * 1.3) {
                    draw = false;
                    break;
                }
            }
            
            if (draw) {
                heart.push(bloom);
                this.garden.createRandomBloom(bloom[0], bloom[1]);
            }
            
            if (angle >= 982) {
                clearInterval(this.heartAnimation);
                this.showMessages();
            } else {
                angle++;
            }
        }, interval);
    }

    getHeartPoint(angle) {
        const xs = [-223, -221, -216, -214, -211, -207, -198, -191, -184, -177, -165, -159, -154, -145, -138, -131, -119, -108, -94, -85, -78, -69, -62, -55, -48, -39, -32, -25, -18, -7, 0, 12, 18, 28, 32, 39, 46, 53, 60, 67, 71, 78, 85, 92, 97, 104, 113, 120, 124, 134, 138, 145, 152, 159, 166, 173, 177, 184, 191, 196, 200, 207, 209, 214, 214, 216, -218, -223, -228, -234, -239, -244, -248, -251, -255, -257, -260, -262, -262, -260, -255, -251, -248, -239, -234, -232, -225, -218, -211, -205, -200, -193, -188, -182, -172, -165, -159, -152, -145, -140, -133, -126, -119, -110, -103, -97, -87, -80, -74, -67, -62, -55, -46, -39, -32, -23, -14, -7, 0, 7, 14, 18, 28, 37, 44, 51, 58, 65, 71, 78, 85, 92, 99, 106, 113, 120, 127, 134, 138, 143, 150, 157, 163, 170, 177, 184, 191, 198, 205, 209, 219, 223, 230, 235, 239, 246, 251, 251, 258, 260, 260, 262, 260, 255, 248, 242, 237, 230, 225, 219, -216, -223, -228, -228, -230, -232, -232, -228, -223, -218, -216, -209, -207, -202, -198, -195, -188, -182, -172, -165, -159, -149, -142, -136, -131, -126, -119, -113, -106, -99, -94, -90, -83, -78, -71, -67, -60, -53, -44, -37, -25, -16, -9, -5, 2, 9, 16, 25, 32, 37, 44, 48, 55, 65, 69, 76, 83, 90, 99, 106, 115, 122, 127, 134, 140, 145, 150, 157, 161, 166, 168, 175, 182, 186, 193, 198, 205, 209, 214, 219, 221, 225, 225, 225, 225, 221, 216, 212, -209, -202, -200, -195, -191, -188, -186, -179, -172, -165, -159, -152, -145, -138, -133, -129, -124, -117, -110, -103, -97, -90, -83, -78, -71, -64, -57, -50, -44, -37, -30, -25, -18, -9, -2, 5, 14, 21, 28, 37, 41, 51, 58, 67, 71, 78, 85, 94, 101, 111, 117, 124, 131, 136, 140, 145, 154, 159, 163, 168, 175, 182, 186, 196, 200, 209, 209, -216, -216, -216, -216, -216, -216, -216, -216, -216, -216, -214, -214, -214, -214, -211, -211, 212, 212, 212, 212, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, -218, -223, -225, -230, -232, -232, -230, -228, -223, -218, -214, -207, -205, -200, -193, -186, -182, -177, -170, -165, -161, -154, -147, -142, -136, -129, -119, -113, -103, -97, -90, -83, -76, -69, -62, -57, -50, -44, -37, -30, -23, -16, -9, -2, 5, 12, 18, 25, 30, 39, 46, 55, 62, 69, 76, 83, 92, 99, 106, 115, 122, 127, 129, 136, 145, 152, 159, 166, 175, 179, 184, 191, 191, 193, 198, 202, 209, 214, 221, 225, 230, 230, 228, 221, 219, -218, -216, -209, -200, -191, -184, -177, -170, -165, -159, -154, -147, -140, -136, -129, -119, -113, -103, -97, -90, -83, -74, -67, -60, -57, -50, -41, -34, -30, -23, -16, -7, 0, 7, 14, 21, 25, 32, 37, 44, 51, 58, 65, 71, 81, 88, 94, 101, 106, 113, 117, 122, 127, 131, 138, 147, 154, 163, 170, 179, 182, 184, 193, 200, 205, 209, -214, -214, -216, -216, -216, -216, -216, -216, -216, -216, -214, -214, -214, -214, -214, -214, -214, -214, -214, 212, 212, 212, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, 214, -124, -129, -133, -138, -145, -154, -161, -170, -177, -184, -188, -193, -195, -198, -202, -205, -209, -216, -221, -225, -225, -225, -223, -218, -216, -205, -200, -191, -184, -177, -170, -165, -159, -154, -145, -138, -131, -124, -117, -110, -103, -97, -90, -83, -76, -69, -60, -53, -46, -39, -34, -27, -21, -11, -2, 5, 12, 18, 23, 30, 35, 44, 51, 60, 67, 74, 81, 88, 94, 104, 111, 120, 124, 131, 136, 140, 145, 152, 159, 168, 175, 179, 186, 191, 196, 198, 200, 205, 212, 219, 221, 223, 223, 219, 212, 205, 198, 193, 186, 173, 166, 161, 157, 152, 147, 138, 129, 117, 69, 62, 55, 48, 37, 32, 25, -27, -32, -39, -46, -53, -62, -69, -122, -126, -133, -138, -145, -152, -159, -165, -172, -177, -179, -184, -186, -188, -195, -200, -202, -205, -202, -198, -188, -182, -172, -163, -159, -149, -142, -133, -124, -115, -106, -94, -85, -78, -69, -62, -53, -44, -34, -25, -16, -9, -2, 7, 14, 21, 28, 35, 41, 51, 58, 65, 81, 88, 94, 104, 113, 117, 124, 129, 134, 140, 152, 159, 168, 173, 177, 182, 184, 189, 196, 200, 202, 200, 196, 191, 184, 179, 173, 166, 159, 152, 147, 140, 134, 129, 122, 115, 69, 62, 55, 46, 41, 35, 28, -25, -30, -37, -44, -48, -55, -62, -71, -129, -122, -115, -108, -106, -101, -99, -94, -87, -80, -74, -67, -117, -117, -117, -117, -117, -117, -117, -117, -117, -117, -117, -117, -117, -117, -119, -119, -76, -76, -78, -78, -78, -78, -78, -78, -78, -78, -78, -78, -78, -78, -78, -78, -115, -110, -103, -97, -92, -85, -117, -115, -108, -101, -97, -90, -83, -99, -99, -99, -106, -108, -110, -110, -108, -103, -103, -99, -97, -94, -92, -92, -94, -21, -21, -23, -23, -23, -23, -23, -23, -23, -21, -21, -21, -21, -21, -21, -21, -21, -30, -23, -16, -7, 0, 5, 9, 16, 23, 30, 21, 18, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 18, 18, -16, -11, -7, 2, 7, 12, 18, 14, 9, 2, -5, -14, -18, -21, 0, 0, -7, -11, -11, -9, -5, 0, 2, 5, 9, 9, 9, 9, 67, 74, 81, 88, 94, 99, 99, 104, 113, 120, 127, 74, 74, 74, 74, 74, 74, 74, 74, 74, 74, 71, 71, 74, 74, 74, 74, 108, 108, 108, 108, 108, 108, 108, 108, 108, 108, 108, 108, 108, 108, 106, 99, 92, 85, 81, 74, 78, 85, 92, 97, 101, 104, 92, 92, 90, 85, 85, 85, 88, 90, 97, 99, 101, 101, 101, 101, 97];
        const ys = [289, 296, 301, 303, 310, 312, 315, 317, 317, 319, 319, 319, 324, 324, 326, 328, 331, 331, 333, 333, 335, 335, 335, 335, 335, 335, 335, 335, 338, 338, 338, 338, 338, 338, 338, 338, 338, 338, 338, 338, 335, 335, 335, 333, 333, 333, 331, 328, 326, 326, 326, 324, 324, 324, 321, 321, 321, 319, 319, 317, 315, 315, 310, 303, 298, 292, 211, 213, 216, 218, 220, 223, 225, 229, 232, 236, 243, 248, 255, 262, 266, 271, 273, 275, 280, 285, 289, 289, 292, 294, 294, 296, 298, 301, 305, 305, 308, 308, 308, 310, 310, 310, 312, 312, 312, 315, 315, 317, 319, 319, 321, 321, 321, 321, 321, 321, 321, 321, 321, 321, 321, 319, 321, 321, 321, 321, 321, 319, 317, 317, 317, 317, 315, 315, 315, 315, 315, 312, 312, 308, 308, 308, 305, 303, 303, 301, 301, 298, 296, 294, 292, 289, 287, 285, 282, 278, 275, 269, 266, 259, 255, 248, 243, 236, 229, 225, 223, 220, 218, 216, 213, 213, 218, 223, 227, 234, 241, 246, 248, 252, 257, 259, 264, 271, 273, 278, 282, 285, 285, 285, 285, 285, 287, 289, 292, 294, 296, 296, 298, 298, 301, 303, 301, 301, 298, 296, 296, 296, 296, 298, 303, 303, 305, 305, 305, 308, 308, 308, 305, 303, 301, 298, 298, 296, 294, 294, 294, 294, 294, 294, 294, 294, 292, 289, 289, 289, 285, 282, 280, 275, 271, 271, 269, 269, 269, 264, 264, 262, 257, 255, 248, 246, 239, 232, 225, 220, 216, 211, 232, 234, 236, 243, 246, 250, 255, 262, 262, 262, 262, 262, 262, 262, 266, 269, 273, 275, 275, 278, 278, 278, 278, 275, 275, 275, 275, 275, 275, 278, 278, 280, 282, 285, 287, 287, 287, 287, 287, 285, 282, 282, 278, 275, 273, 273, 273, 273, 273, 273, 273, 273, 273, 271, 269, 264, 262, 259, 255, 252, 250, 250, 248, 248, 246, 241, 234, 126, 133, 140, 144, 151, 158, 165, 172, 179, 186, 193, 200, 204, 213, 220, 227, 119, 128, 138, 142, 149, 156, 163, 170, 177, 184, 190, 197, 207, 213, 220, 227, 73, 75, 80, 82, 89, 96, 103, 108, 110, 115, 117, 121, 124, 126, 128, 128, 131, 135, 138, 140, 144, 147, 149, 151, 154, 154, 154, 154, 154, 154, 154, 154, 154, 156, 158, 161, 161, 165, 167, 167, 170, 170, 170, 170, 170, 170, 167, 165, 163, 161, 161, 158, 158, 158, 158, 158, 158, 158, 158, 158, 156, 154, 149, 147, 147, 147, 147, 147, 147, 144, 140, 135, 131, 124, 121, 119, 115, 112, 110, 108, 103, 96, 91, 87, 82, 91, 98, 101, 103, 103, 103, 105, 108, 110, 115, 119, 126, 131, 133, 133, 133, 133, 133, 133, 133, 133, 133, 133, 135, 138, 140, 142, 142, 142, 144, 147, 147, 147, 147, 147, 144, 144, 142, 142, 140, 140, 140, 140, 140, 140, 140, 140, 138, 135, 133, 133, 128, 126, 124, 124, 124, 124, 124, 121, 119, 115, 112, 110, 108, 105, 103, -37, -28, -24, -14, -7, -0, 6, 13, 20, 27, 32, 39, 45, 55, 62, 68, 75, 82, 89, -44, -35, -28, -21, -12, -5, 2, 9, 18, 25, 32, 39, 45, 52, 59, 66, 75, 82, 91, -113, -111, -106, -104, -102, -102, -104, -104, -104, -104, -99, -97, -92, -88, -83, -79, -76, -74, -72, -65, -60, -53, -47, -42, -37, -37, -37, -35, -30, -26, -21, -19, -14, -12, -10, -10, -10, -10, -7, -7, -7, -7, -7, -7, -5, -5, -5, -0, -0, 2, 4, 4, 6, 6, 6, 6, 6, 6, 4, 2, -0, -0, -0, -0, -0, -3, -3, -3, -3, -3, -3, -3, -3, -5, -10, -12, -17, -19, -19, -19, -19, -21, -24, -26, -30, -35, -40, -47, -49, -51, -56, -63, -72, -76, -83, -86, -88, -90, -90, -90, -92, -97, -102, -106, -109, -111, -111, -113, -115, -115, -118, -120, -122, -125, -125, -122, -120, -118, -118, -118, -118, -115, -102, -99, -97, -95, -95, -92, -92, -92, -92, -90, -86, -81, -76, -69, -67, -65, -63, -56, -51, -51, -51, -51, -51, -44, -40, -33, -30, -28, -28, -28, -28, -28, -26, -26, -26, -24, -21, -17, -17, -17, -17, -17, -14, -14, -14, -17, -19, -19, -21, -21, -21, -21, -21, -21, -21, -21, -24, -26, -28, -33, -35, -35, -35, -35, -37, -40, -42, -44, -51, -53, -56, -58, -63, -69, -69, -74, -74, -76, -79, -81, -81, -86, -90, -95, -99, -102, -102, -102, -102, -102, -104, -106, -106, -109, -111, -113, -111, -111, -109, -106, -106, -106, -106, -74, -76, -76, -76, -72, -67, -69, -72, -74, -74, -74, -74, -81, -88, -95, -102, -109, -115, -122, -129, -136, -143, -150, -157, -164, -171, -178, -184, -81, -88, -92, -99, -106, -115, -125, -132, -138, -145, -152, -161, -168, -175, -180, -187, -187, -182, -182, -182, -184, -187, -189, -194, -194, -194, -196, -194, -189, -191, -198, -207, -201, -205, -212, -219, -224, -230, -235, -233, -228, -224, -219, -210, -205, -189, -182, -175, -168, -161, -152, -148, -141, -134, -127, -120, -113, -106, -99, -90, -83, -76, -72, -72, -72, -72, -69, -72, -74, -74, -74, -74, -83, -90, -95, -104, -111, -118, -125, -132, -138, -148, -152, -159, -168, -175, -182, -187, -184, -182, -182, -182, -182, -184, -187, -191, -194, -194, -194, -194, -191, -191, -201, -210, -207, -214, -221, -228, -233, -240, -237, -233, -228, -221, -214, -207, -79, -76, -76, -74, -72, -67, -74, -74, -76, -76, -76, -79, -88, -95, -104, -113, -120, -129, -136, -143, -150, -155, -161, -168, -175, -182, -189, -86, -92, -99, -109, -115, -122, -132, -141, -148, -155, -161, -168, -175, -182, -184, -184, -182, -184, -184, -189, -194, -194, -194, -191, -189, -182, -201, -205, -203, -207, -214, -221, -230, -235, -235, -230, -226, -219, -212, -205, -203];
        
        if (angle < xs.length && angle < ys.length) {
            return [this.offsetX + xs[angle], this.offsetY + ys[angle]];
        }
        return [this.offsetX, this.offsetY];
    }

    // Time calculation and display with proper formatting
    timeElapse(together) {
        const current = new Date();
        const seconds = Math.floor((current.getTime() - together.getTime()) / 1000);
        const days = Math.floor(seconds / (3600 * 24));
        const remainingSeconds = seconds % (3600 * 24);
        const hours = Math.floor(remainingSeconds / 3600);
        const minutes = Math.floor((remainingSeconds % 3600) / 60);
        const secs = remainingSeconds % 60;

        const paddedHours = hours < 10 ? "0" + hours : hours;
        const paddedMinutes = minutes < 10 ? "0" + minutes : minutes;
        const paddedSeconds = secs < 10 ? "0" + secs : secs;

        const elapsedTimeElement = document.getElementById("elapseClock");
        if (elapsedTimeElement) {
            elapsedTimeElement.innerHTML = `<span class="digit">${days}</span> days <span class="digit">${paddedHours}</span> hours <span class="digit">${paddedMinutes}</span> minutes <span class="digit">${paddedSeconds}</span> seconds`;
        }
    }

    // Typewriter effect implementation
    typewriter(element) {
        if (!element) return;
        
        const str = element.innerHTML;
        element.innerHTML = '';
        element.style.display = 'block';
        
        let progress = 0;
        
        const timer = setInterval(() => {
            const current = str.substr(progress, 1);
            if (current == '<') {
                progress = str.indexOf('>', progress) + 1;
            } else {
                progress++;
            }
            element.innerHTML = str.substring(0, progress) + (progress & 1 ? '_' : '');
            if (progress >= str.length) {
                clearInterval(timer);
            }
        }, 75);
    }

    // Show messages after heart animation
    showMessages() {
        this.adjustWordsPosition();
        const messages = document.getElementById('messages');
        if (messages) {
            this.fadeIn(messages, 5000, () => {
                this.showLoveU();
            });
        }
    }

    adjustWordsPosition() {
        const words = document.getElementById('words');
        const garden = document.getElementById('garden');
        if (words && garden) {
            words.style.position = "absolute";
            words.style.top = (garden.offsetTop + 195) + "px";
            words.style.left = (garden.offsetLeft + 70) + "px";
        }
    }

    showLoveU() {
        const loveu = document.getElementById('loveu');
        if (loveu) {
            this.fadeIn(loveu, 3000);
        }
    }

    // Adjust code position
    adjustCodePosition() {
        const code = document.getElementById("code");
        const garden = document.getElementById("garden");
        if (code && garden) {
            code.style.marginTop = ((garden.offsetHeight - code.offsetHeight) / 2) + "px";
        }
    }
}

// Initialize the app globally
window.birthdayApp = new BirthdayApp();

// Export for module use if needed
if (typeof module !== 'undefined' && module.exports) {
    module.exports = BirthdayApp;
}
// Modern ES6+ Garden Animation
// Converted from prototype-based to class-based architecture

class Vector {
    constructor(x, y) {
        this.x = x;
        this.y = y;
    }

    rotate(theta) {
        const x = this.x;
        const y = this.y;
        this.x = Math.cos(theta) * x - Math.sin(theta) * y;
        this.y = Math.sin(theta) * x + Math.cos(theta) * y;
        return this;
    }

    mult(f) {
        this.x *= f;
        this.y *= f;
        return this;
    }

    clone() {
        return new Vector(this.x, this.y);
    }

    length() {
        return Math.sqrt(this.x * this.x + this.y * this.y);
    }

    subtract(v) {
        this.x -= v.x;
        this.y -= v.y;
        return this;
    }

    set(x, y) {
        this.x = x;
        this.y = y;
        return this;
    }
}

class Petal {
    constructor(stretchA, stretchB, startAngle, angle, growFactor, bloom) {
        this.stretchA = stretchA;
        this.stretchB = stretchB;
        this.startAngle = startAngle;
        this.angle = angle;
        this.bloom = bloom;
        this.growFactor = growFactor;
        this.r = 1;
        this.isfinished = false;
    }

    draw() {
        const ctx = this.bloom.garden.ctx;
        const v1 = new Vector(0, this.r).rotate(Garden.degrad(this.startAngle));
        const v2 = v1.clone().rotate(Garden.degrad(this.angle));
        const v3 = v1.clone().mult(this.stretchA);
        const v4 = v2.clone().mult(this.stretchB);
        
        ctx.strokeStyle = this.bloom.c;
        ctx.beginPath();
        ctx.moveTo(v1.x, v1.y);
        ctx.bezierCurveTo(v3.x, v3.y, v4.x, v4.y, v2.x, v2.y);
        ctx.stroke();
    }

    render() {
        if (this.r <= this.bloom.r) {
            this.r += this.growFactor;
            this.draw();
        } else {
            this.isfinished = true;
        }
    }
}

class Bloom {
    constructor(p, r, c, pc, garden) {
        this.p = p;
        this.r = r;
        this.c = c;
        this.pc = pc;
        this.petals = [];
        this.garden = garden;
        this.init();
        this.garden.addBloom(this);
    }

    draw() {
        let isfinished = true;
        this.garden.ctx.save();
        this.garden.ctx.translate(this.p.x, this.p.y);
        
        for (let i = 0; i < this.petals.length; i++) {
            const p = this.petals[i];
            p.render();
            isfinished = isfinished && p.isfinished;
        }
        
        this.garden.ctx.restore();
        
        if (isfinished) {
            this.garden.removeBloom(this);
        }
    }

    init() {
        const angle = 360 / this.pc;
        const startAngle = Garden.randomInt(0, 90);
        
        for (let i = 0; i < this.pc; i++) {
            this.petals.push(new Petal(
                Garden.random(Garden.options.petalStretch.min, Garden.options.petalStretch.max),
                Garden.random(Garden.options.petalStretch.min, Garden.options.petalStretch.max),
                startAngle + i * angle,
                angle,
                Garden.random(Garden.options.growFactor.min, Garden.options.growFactor.max),
                this
            ));
        }
    }
}

class Garden {
    constructor(ctx, element) {
        this.blooms = [];
        this.element = element;
        this.ctx = ctx;
    }

    render() {
        for (let i = 0; i < this.blooms.length; i++) {
            this.blooms[i].draw();
        }
    }

    addBloom(b) {
        this.blooms.push(b);
    }

    removeBloom(b) {
        for (let i = 0; i < this.blooms.length; i++) {
            if (this.blooms[i] === b) {
                this.blooms.splice(i, 1);
                return this;
            }
        }
    }

    createRandomBloom(x, y) {
        this.createBloom(
            x, y,
            Garden.randomInt(Garden.options.bloomRadius.min, Garden.options.bloomRadius.max),
            Garden.randomrgba(
                Garden.options.color.rmin, Garden.options.color.rmax,
                Garden.options.color.gmin, Garden.options.color.gmax,
                Garden.options.color.bmin, Garden.options.color.bmax,
                Garden.options.color.opacity
            ),
            Garden.randomInt(Garden.options.petalCount.min, Garden.options.petalCount.max)
        );
    }

    createBloom(x, y, r, c, pc) {
        new Bloom(new Vector(x, y), r, c, pc, this);
    }

    clear() {
        this.blooms = [];
        this.ctx.clearRect(0, 0, this.element.width, this.element.height);
    }
}

// Garden static configuration
Garden.options = {
    petalCount: {
        min: 8,
        max: 15
    },
    petalStretch: {
        min: 0.1,
        max: 3
    },
    growFactor: {
        min: 0.1,
        max: 1
    },
    bloomRadius: {
        min: 4,
        max: 7
    },
    density: 10,
    growSpeed: 1500 / 60,
    color: {
        rmin: 128,
        rmax: 255,
        gmin: 0,
        gmax: 128,
        bmin: 0,
        bmax: 128,
        opacity: 0.1
    },
    tanAngle: 60
};

Garden.random = function (min, max) {
    return Math.random() * (max - min) + min;
};

Garden.randomInt = function (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
};

Garden.circle = 2 * Math.PI;

Garden.degrad = function (angle) {
    return Garden.circle / 360 * angle;
};

Garden.raddeg = function (angle) {
    return angle / Garden.circle * 360;
};

Garden.rgba = function (r, g, b, a) {
    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';
};

Garden.randomrgba = function (rmin, rmax, gmin, gmax, bmin, bmax, a) {
    const r = Math.round(Garden.random(rmin, rmax));
    const g = Math.round(Garden.random(gmin, gmax));
    const b = Math.round(Garden.random(bmin, bmax));
    const limit = 5;
    
    if (Math.abs(r - g) <= limit && Math.abs(g - b) <= limit && Math.abs(b - r) <= limit) {
        return Garden.randomrgba(rmin, rmax, gmin, gmax, bmin, bmax, a);
    } else {
        return Garden.rgba(r, g, b, a);
    }
};

// Export for global use
window.Vector = Vector;
window.Petal = Petal; 
window.Bloom = Bloom;
window.Garden = Garden;
	</script>
</body>
</html>